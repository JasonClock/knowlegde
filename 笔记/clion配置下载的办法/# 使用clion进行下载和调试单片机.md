# 使用clion进行下载和调试单片机
clion具有开箱即用的优点，不需要我们配置编译环境（~~爽了~~）
我们需要配置的就只有clion的下载和调试功能
正常来说，clion的运行和调式功能是直接在我们的电脑上跑的，但是呢，我们的程序是只能在stm32上跑的，所以需要单独准备一个下载和调试的地方
- 最简单直接的方法是跟着keysking的教程来设置（~~虽然但是我当时还是没有搞好，有点头铁想自己搞~~）下面是链接🔗
[CLion开发STM32轻松搞定](https://www.bilibili.com/video/BV1ren2zMEaS/?share_source=copy_web&vd_source=1c0c459ba67d00ffc04a34a8f407ec8f)
- 这里就直接讲讲第二种
1. 首先打开一个工程
![](.\屏幕截图 2026-02-02 095527.png)
选择对应的文件夹
![](.\屏幕截图 2026-02-02 095554.png)
第一次打开之后应该会出现这个界面
依次点击这几个按钮
![](.\屏幕截图 2026-02-02 095622.png)
2. 选择cmake配置文件
![](.\屏幕截图 2026-02-02 095634.png)
就在屏幕上方的位置
选择debug-debug（~~很奇怪泥，debug用不了直接用debug-debug，可能是工具链不一样吧不清楚::sob::~~)
3. 选择旁边那个蓝色的按钮
![](.\屏幕截图 2026-02-02 095644.png)
点击下面的编辑配置
进入下面这个界面，点击左上角的＋号，点击Openocd下载并调试

![](.\屏幕截图 2026-02-02 095656.png)

依次点击下面的一和二进行配置

![](.\屏幕截图 2026-02-02 095748.png)

1. 我们需要选择.elf的一个文件，这个是我们在clion里编译之后产生的（一定的先点击一次编译），这个文件一般是放在 工程名\build\Debug下的，我们选择这个文件即可
![](.\屏幕截图 2026-02-02 095822.png)
2. 我们需要选择下载的芯片型号和下载的调试器（比如stlink，jlink什么的呀）的配置文件
打开我发送的openocd压缩包，进入share\openocd\scripts的路径下，里面的interface是我们的调试器文件，target是单片机芯片的文件
![](.\屏幕截图 2026-02-05 003516.png)
嗯，重点来了，clion的面板配置文件好像只可以塞下一个文件，所以我们需要把配置文件塞进一个文件里，
这里的解决方法是创建一个txt文本，写下这几个句子(这里以使用stm32f1和stlink为例)
![](.\屏幕截图 2026-02-05 004132.png)
写好之后更改文件的后缀名，改成.cfg
然后再第二个圈那里填入这个文件

做完这些之后就可以快乐的下载和调试程序啦:happy: